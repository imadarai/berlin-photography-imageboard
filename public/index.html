<!doctype html>
<html>
<head>
    <title>Berlin Night Photography</title>
    <link rel="stylesheet" href="/css/styles.css">
    <link href="https://fonts.googleapis.com/css?family=Oswald&display=swap" rel="stylesheet">
</head>
<body>
    <header>
        <h1>BERLIN NIGHT PHOTOGRAPHY</h1>
        <div class="divider"></div>
        <h4>LONG EXPOSURE AND LIGHT TRAILS</h4>
        <br>
        <br>
    </header>
    <main>
        <image-modal v-if="idOfImageClicked"
            :id="idOfImageClicked"
            @close-modal-message-to-template = "closeModalFuncitonInInstance"
        ></image-modal>

        <div class="form-container">
            <h2>Image Details</h2>
            <form>
                <div class="field">
                    <label class="image-upload" for="title">Title: </label>
                    <input class="image-upload" v-model="formData.title" type="text" name="titile" placeholder="title">
                </div>
                <div class="field">
                    <label class="image-upload" for="description">Description: </label>
                    <input class="image-upload" v-model="formData.description" type="text" name="description" placeholder="description">
                </div>
                <div class="field">
                    <label class="image-upload" for="username">UserName: </label>
                    <input class="image-upload" v-model="formData.username" type="text" name="username" placeholder="username">
                </div>
                <div class="field">
                    <input class="image-upload" @change= "handleChange" type="file" name="file" accept="image/*">
                </div>
                <div class="field">
                    <button @click="handleClick">submit</button>
                </div>
            </form>
            <!-- https://codepen.io/murphyrandle/pen/wvCgI/ -->
        </div>
        <button class="reveal-form" type="button" name="reveal-form">Upload Image</button>

        <div class="image-block" v-for ="imageData in images">
            <a :href="'#' + imageData.id">
                <img class="image-on-home" :src="imageData.url" :alt="imageData.description" :id="imageData.id" >
            </a>
            <h3>{{imageData.title}}</h3>
        </div>
        <div class="end-of-stream">
            <p v-if="EndOfImageStream">End of Image Stream</p>
        </div>
    </main>



    <!-- VUE COMPONENT FOR IMAGE MODAL -->
    <script id="single-image-component" type="text/x-template">

        <div class="image-modal">
            <div @click="closeModalRequestToVueComponent" class="close-modal">x</div>

            <div class="image-details">
                <h1>{{ image.title }}</h1>
                <h3>By {{ image.username}}</h3>
                <div class="image-with-buttons">
                    <div class="previous-photo" @click="previousImage" v-if="prevId" >
                        <div class="left-arrow"></div>
                    </div>
                    <img class="image-in-image-modal" :src="image.url" :alt="image.description">
                    <div class="next-photo" @click="nextImage" v-if="nextId">
                        <div class="right-arrow"></div>
                    </div>

                </div>
                <p>{{ image.description}}</p>
                <!-- <p>Uploaded at: {{ image.created_at }}</p> -->
            </div>
            <div class="comments-container">
                <div class="add-comment-container">
                    <h3>Add a comment:</h3>
                    <form class="comments-form">
                        <input v-model="newComment.username" type="text" name="username" placeholder="username">
                        <textarea v-model="newComment.commentText" type="text" name="commentText" placeholder="Enter your comment here"></textarea>
                        <button @click="sendComment">submit</button>
                    </form>
                </div>
                <div class="view-comment-container">
                    <h3>Comments:</h3>
                    <div class="comments-block" v-for ="commentsData in comments">
                        <p class="each-comment"><span class="username"> {{commentsData.username}}:</span> {{commentsData.comment}}</p>
                        <br>
                    </div>
                </div>
            </div>
        </div>

    </script>
    <footer>

    </footer>

    <script src="/js/vue.js"></script>
    <script src="/js/axios.min.js"></script>
    <script src="/js/script.js"></script>
</body>
</html>
